<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>ValidatorList</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Ripple">
<link rel="up" href="../ref.html" title="Reference">
<link rel="prev" href="MIN_NETWORK_VALIDATOR_LIST_OVERLAP.html" title="MIN_NETWORK_VALIDATOR_LIST_OVERLAP">
<link rel="next" href="ValidatorList/ValidatorList.html" title="ValidatorList::ValidatorList">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Ripple Logo" width="300" height="80" src="../../images/logo.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="MIN_NETWORK_VALIDATOR_LIST_OVERLAP.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="ValidatorList/ValidatorList.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="ripple.ref.ValidatorList"></a><a class="link" href="ValidatorList.html" title="ValidatorList">ValidatorList</a>
</h3></div></div></div>
<p>
        Validator Lists
      </p>
<pre class="programlisting"><span class="keyword">class</span> <span class="identifier">ValidatorList</span>
</pre>
<h5>
<a name="ripple.ref.ValidatorList.h0"></a>
        <span class="phrase"><a name="ripple.ref.ValidatorList.member_functions"></a></span><a class="link" href="ValidatorList.html#ripple.ref.ValidatorList.member_functions">Member
        Functions</a>
      </h5>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Name
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/ValidatorList.html" title="ValidatorList::ValidatorList"><span class="bold"><strong>ValidatorList</strong></span></a>
                </p>
              </td>
<td>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/calcQuorum.html" title="ValidatorList::calcQuorum"><span class="bold"><strong>calcQuorum</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Determine the quorum for the trusted list size.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/for_each_listed.html" title="ValidatorList::for_each_listed"><span class="bold"><strong>for_each_listed</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Invokes the callback once for every listed validation public key.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/join.html" title="ValidatorList::join"><span class="bold"><strong>join</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Wait for current fetches from sites to complete.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/listed.html" title="ValidatorList::listed"><span class="bold"><strong>listed</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Determine whether a key is included on any lists.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/load.html" title="ValidatorList::load"><span class="bold"><strong>load</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Load configured site URIs and trusted keys.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/onConsensusStart.html" title="ValidatorList::onConsensusStart"><span class="bold"><strong>onConsensusStart</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Update trusted keys.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/quorum.html" title="ValidatorList::quorum"><span class="bold"><strong>quorum</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Get quorum value for current trusted key set.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/removePublisher.html" title="ValidatorList::removePublisher"><span class="bold"><strong>removePublisher</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Stop trusting lists signed by publisher's public key.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/start.html" title="ValidatorList::start"><span class="bold"><strong>start</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Start fetching lists from sites.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/stop.html" title="ValidatorList::stop"><span class="bold"><strong>stop</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Stop fetching lists from sites.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/trusted.html" title="ValidatorList::trusted"><span class="bold"><strong>trusted</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Determine whether a key is trusted.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/trustedPublisher.html" title="ValidatorList::trustedPublisher"><span class="bold"><strong>trustedPublisher</strong></span></a>
                </p>
              </td>
<td>
                <p>
                  Determine whether a list publisher key is trusted.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <a class="link" href="ValidatorList/_ValidatorList.html" title="ValidatorList::~ValidatorList"><span class="bold"><strong>~ValidatorList</strong></span></a>
                </p>
              </td>
<td>
              </td>
</tr>
</tbody>
</table></div>
<p>
        Rippled accepts ledger proposals and validations from trusted validator nodes.
        A ledger is considered fully-validated once the number of received trusted
        validations for a ledger meets or exceeds a quorum value.
      </p>
<p>
        This class manages the set of validation public keys the local rippled node
        trusts. The list of trusted keys is populated using the keys listed in the
        configuration file as well as remote sites that serve lists of keys recommended
        by trusted publishers. The site URIs and trusted publisher public keys are
        specified in the config.
      </p>
<p>
        The validator lists from the remote sites are fetched at a regular interval.
        Fetched lists are expected to be in JSON format and contain the following
        fields:* "manifest": Base64-encoded serialization of a manifest
        containing the publisher's master and signing public keys. This has the same
        format as the [validation_manifest] config section. * "blob": Base64-encoded
        JSON string containing a "sequence" and "validators"
        field. "validators" contains an array of objects with "validation_public_key"
        and "manifest" fields. "validation_public_key" must be
        an Ed25519 master public key. * "signature": Hex-encoded signature
        of the blob using the publisher's signing key. * "version": 1 *
        "refreshInterval": (optional) recommended fetch interval in minutes
      </p>
<p>
        Individual validator lists are stored separately by publisher. The number
        of lists on which a validator's public key appears is also tracked.
      </p>
<p>
        The list of trusted validation public keys is reset at the start of each
        consensus round to take into account the latest fetched lists as well as
        the set of validators from whom validations are being received. Listed validation
        public keys are shuffled and then sorted by the number of lists they appear
        on. (The shuffling makes the order/rank of validators with the same number
        of listings non-deterministic.) If there is only one list, all listed keys
        are trusted. Otherwise, the trusted list size is set to 80% of the median
        list length. Finally, a quorum value is calculated for the new trusted validator
        list.
      </p>
<h5>
<a name="ripple.ref.ValidatorList.h1"></a>
        <span class="phrase"><a name="ripple.ref.ValidatorList.requirements"></a></span><a class="link" href="ValidatorList.html#ripple.ref.ValidatorList.requirements">Requirements</a>
      </h5>
<p>
        <span class="emphasis"><em>Header: </em></span><code class="literal">ripple/app/misc/ValidatorList.h</code>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2016 Ripple Labs, Inc.<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="MIN_NETWORK_VALIDATOR_LIST_OVERLAP.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="ValidatorList/ValidatorList.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
